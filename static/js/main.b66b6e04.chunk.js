(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{41:function(e,t,n){e.exports=n(56)},46:function(e,t,n){},47:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(9),l=(n(46),n(47),n(5)),c=n(25),o=n(26),u={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight"};function s(e){return{type:"SET_DIFFICULTY",difficulty:e}}var f=Object(l.b)((function(e,t){var n=e.selectedCells,r=e.flaggedCells,a=e.exploded,i=e.gameOver,l=t.cell;return{isVisible:i||n.includes(l),isFlagged:r.includes(l),isExploded:a.includes(l)}}),(function(e){return{flagCell:function(t,n){return t.preventDefault(),e(function(e){return{type:"CLICK_FLAG",cell:e}}(n))},clickCell:function(t,n){return t.preventDefault(),e(function(e){return{type:"CLICK_CELL",cell:e}}(n))}}}))((function(e){var t=e.cell,n=e.isFlagged,r=e.isVisible,i=e.isExploded,l=e.flagCell,s=e.clickCell;if(i)return a.a.createElement("div",{"data-test-detonated":!0,className:"cell detonate"},a.a.createElement(c.a,{icon:o.b}));if(n)return a.a.createElement("div",{"data-test-flagged":!0,className:"cell raised flag",onContextMenu:function(e){l(e,t)}},a.a.createElement(c.a,{icon:o.c}));if(r){if(t.isMine)return a.a.createElement("div",{"data-test-visible-mine":!0,className:"cell bomb"},a.a.createElement(c.a,{icon:o.a}));if(0!==t.number){var f=u[t.number];return a.a.createElement("div",{"data-test-visible":!0,className:"cell "+f},t.number)}return a.a.createElement("div",{"data-test-empty":!0,className:"cell empty"})}return a.a.createElement("div",{"data-test-hidden":!0,className:"cell raised",onContextMenu:function(e){l(e,t)},onClick:function(e){s(e,t)}})}));function d(e){var t=e.row.map((function(e,t){return a.a.createElement(f,{"data-column":t,key:e.id,cell:e})}));return a.a.createElement("div",{"data-row":e.y,key:e.y,className:"row"},t)}var m=n(24),g=function(e){var t=e.gameRunning,n=e.gameOver,i=e.gameWon,l=Object(r.useState)(1),c=Object(m.a)(l,2),o=c[0],u=c[1];Object(r.useEffect)((function(){var e=null;return t&&(e=setInterval((function(){u((function(e){return e+1}))}),1e3)),function(){return clearInterval(e)}}));var s=i?"timer won":"timer";return t||n?a.a.createElement("div",{className:s},o):a.a.createElement("div",{className:"timer-blank"})};function h(e){var t,n=e.selectedCells,r=e.flaggedCells,i=e.board,l=e.gameWon,c=e.gameOver;return c&&l?t=a.a.createElement("div",null,"Congratulations, you win!"):c&&(t=a.a.createElement("div",null,"Sorry, please try again :(")),a.a.createElement("div",{className:"progress"},a.a.createElement("dl",null,a.a.createElement("dt",null,"Cells"),a.a.createElement("dd",null,n.length," / ",i.totalCells)),a.a.createElement("dl",null,a.a.createElement("dt",null,"Flags"),a.a.createElement("dd",null,r.length," / ",i.totalMines)),t)}var p=Object(l.b)((function(e){return{board:e.board,gameRunning:e.gameRunning,gameOver:e.gameOver,gameWon:e.gameWon,selectedCells:e.selectedCells,flaggedCells:e.flaggedCells}}),null)((function(e){var t=e.board,n=e.gameRunning,r=e.gameOver,i=e.gameWon,l=e.selectedCells,c=e.flaggedCells,o=t.rows.map((function(e,t){return a.a.createElement(d,{row:e,"data-y":t,key:t})}));return a.a.createElement("div",{className:"game"},a.a.createElement(h,{selectedCells:l,flaggedCells:c,gameWon:i,gameOver:r,board:t}),a.a.createElement(g,{gameRunning:n,gameOver:r,gameWon:i}),a.a.createElement("div",{className:"board"},o))})),b=n(36);var y=Object(l.b)((function(e){return{board:e.board,clickedMine:e.clickedMine}}),(function(e){return{chainReaction:function(t){return e(function(e){return{type:"CHAIN_REACTION",cell:e}}(t))}}}))((function(e){var t=e.board,n=e.clickedMine,a=e.chainReaction,i=t.mines,l=Object(r.useState)([]),c=Object(m.a)(l,2),o=c[0],u=c[1];return Object(r.useEffect)((function(){n&&u(function(e,t){return e.map((function(e){return{distance:Math.hypot(e.x-t.x,e.y-t.y),cell:e}})).sort((function(e,t){return e.distance-t.distance}))}(i,n))}),[n]),Object(r.useEffect)((function(){if(n&&0!==o.length){var e=Object(b.a)(o),t=e[0],r=e.slice(1);if(a(t.cell),r.length>0){var i,l=200*Math.random();return i=setInterval((function(){u(r)}),l),function(){return clearInterval(i)}}}}),[o,n]),null})),v=n(11);var O={easy:{width:10,height:10,density:10},medium:{width:30,height:25,density:120},hard:{width:50,height:30,density:220},insane:{width:60,height:30,density:350}},C=Object.keys(O),j=Object(l.b)((function(e,t){return{difficulty:e.difficulty,resetGame:e.resetGame,history:t.history}}),(function(e){return{resetGame:function(){return e({type:"RESET_GAME"})},setDifficultyFromUrl:function(t){if(C.includes(t))return e(s(t)),!0}}}))((function(e){var t=e.resetGame,n=e.difficulty,r=e.history,i=e.setDifficultyFromUrl,l=function(){return r.push("/")},c=Object(v.f)().difficulty;return n?a.a.createElement("section",null,a.a.createElement("button",{onClick:l},"Change Difficulty"),a.a.createElement("button",{onClick:t},"Start Over"),a.a.createElement(p,null),a.a.createElement(y,null)):(i(c)||l(),null)})),E=n(39),w=Object.keys(O).map((function(e){return{value:e,label:(t=e,"".concat(t[0].toUpperCase()).concat(t.slice(1)))};var t}));var k=Object(l.b)(null,(function(e,t){var n=t.history;return{setDifficulty:function(t){var r=t.value;e(s(r)),C.includes(r)&&n.push("/".concat(r))}}}))((function(e){e.difficulty;var t=e.setDifficulty;return a.a.createElement("div",{className:"difficulty"},a.a.createElement("div",{className:"difficulty__selector",style:{textAlign:"left"}},a.a.createElement("h3",null,"Select Difficulty"),a.a.createElement(E.a,{options:w,onChange:t})))})),P=n(29);var D=function(){return a.a.createElement("main",{className:"app"},a.a.createElement(P.a,null,a.a.createElement(v.c,null,a.a.createElement(v.a,{path:"/:difficulty",component:j}),a.a.createElement(v.a,{path:"/",component:k}))))},M=n(18);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N,S,I=n(7),x=n(12),R=n(40),_=n(22),F=n(23),L=n(13),W=n(14),A=n.n(W),G=(N=function(){function e(t,n,r,a,i){Object(_.a)(this,e),this.board=t,this.id=n,this.isMine=r,this.x=a,this.y=i}return Object(F.a)(e,[{key:"number",get:function(){return this.isMine?"!":this.board.fetchSiblings(this).filter((function(e){return e.isMine})).length}}]),e}(),Object(L.a)(N.prototype,"number",[A.a],Object.getOwnPropertyDescriptor(N.prototype,"number"),N.prototype),N);function T(e,t,n){var r=function(e,t){var n=e/t;return 1===Math.floor(Math.random()*n)}(e.totalCells,e.density),a=n*e.width+t;return new G(e,a,r,t,n)}var U=(S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(_.a)(this,e),this.height=t,this.width=n,this.density=r,this.rows=function(e){for(var t=[],n=0;n<e.height;n++){for(var r=[],a=0;a<e.width;a++)r.push(T(e,a,n));t.push(r)}return t}(this)}return Object(F.a)(e,[{key:"fetchChainedCells",value:function(e,t){var n=e[0],r=e.slice(1,e.length);if(0===n.number){var a=this.fetchSiblings(n).filter((function(e){return!e.isMine&&e.number>=0&&-1===t.indexOf(e)})),i=[].concat(Object(I.a)(t),Object(I.a)(a)),l=[].concat(Object(I.a)(r),Object(I.a)(a.filter((function(e){return 0===e.number}))));return this._doneFetchChainedCells(l,i)}return this._doneFetchChainedCells(r,t)}},{key:"_doneFetchChainedCells",value:function(e,t){return e.length>0?this.fetchChainedCells(e,t):t}},{key:"fetchSiblings",value:function(e){for(var t=[],n=this.width,r=this.height,a=e.x,i=e.y,l=i+1>r-1?r-1:i+1,c=a-1<0?0:a-1,o=a+1>n-1?n-1:a+1,u=i-1<0?0:i-1;u<=l;u++)for(var s=c;s<=o;s++)u===i&&s===a||t.push(this.rows[u][s]);return t}},{key:"totalCells",get:function(){return this.height*this.width}},{key:"totalMines",get:function(){return this.mines.length}},{key:"mines",get:function(){return this.rows.flat().filter((function(e){return e.isMine}))}}]),e}(),Object(L.a)(S.prototype,"totalCells",[A.a],Object.getOwnPropertyDescriptor(S.prototype,"totalCells"),S.prototype),Object(L.a)(S.prototype,"totalMines",[A.a],Object.getOwnPropertyDescriptor(S.prototype,"totalMines"),S.prototype),Object(L.a)(S.prototype,"mines",[A.a],Object.getOwnPropertyDescriptor(S.prototype,"mines"),S.prototype),S);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(x.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){var n=t.board,r=t.selectedCells;if(e.isMine)return B({},t,{gameRunning:!1,gameOver:!0,gameWon:!1,clickedMine:e});if(!r.includes(e)){var a=function(e,t,n){var r=[].concat(Object(I.a)(t),[n]);return e.fetchChainedCells([n],r)}(n,r,e);return a.length+n.totalMines===n.totalCells?B({},t,{selectedCells:a,gameRunning:!1,gameOver:!0,gameWon:!0}):B({},t,{gameRunning:!0,selectedCells:a})}}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(x.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(x.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=["SET_DIFFICULTY","RESET_GAME"];function z(e,t){var n=t.type,r=Object(R.a)(t,["type"]),a=e.selectedCells;if(q.includes(n)){var i=r.difficulty||e.difficulty,l=O[i];return i&&l?$({},e,{gameRunning:!1,gameOver:!1,gameWon:!1,selectedCells:[],flaggedCells:[],exploded:[],clickedMine:null,difficulty:i,board:i?new U(l.height,l.width,l.density):null}):e}return"CHAIN_REACTION"===n?$({},e,{exploded:[].concat(Object(I.a)(e.exploded),[r.cell])}):"CLICK_CELL"===n?H(r.cell,e):"CLICK_FLAG"!==n||a.includes(r.cell)?e:function(e,t){var n=t.flaggedCells;return n.includes(e)?V({},t,{flaggedCells:n.filter((function(t){return t.id!==e.id}))}):V({},t,{flaggedCells:[].concat(Object(I.a)(n),[e])})}(r.cell,e)}var Q=Object(M.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=z(e,t);return n}));Object(i.render)(a.a.createElement(l.a,{store:Q},a.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.b66b6e04.chunk.js.map