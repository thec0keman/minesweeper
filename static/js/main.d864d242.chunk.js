(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{37:function(e,t,n){e.exports=n(52)},42:function(e,t,n){},43:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),l=(n(42),n(43),n(6)),i=n(22),o=n(23),u={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight"};function s(e){return{type:"SET_DIFFICULTY",difficulty:e}}var f=Object(l.b)((function(e,t){var n=e.selectedCells,r=e.flaggedCells,a=e.exploded,c=e.gameOver,l=t.cell;return{isVisible:c||n.includes(l),isFlagged:r.includes(l),isExploded:a.includes(l)}}),(function(e){return{flagCell:function(t,n){return t.preventDefault(),e(function(e){return{type:"CLICK_FLAG",cell:e}}(n))},clickCell:function(t,n){return t.preventDefault(),e(function(e){return{type:"CLICK_CELL",cell:e}}(n))}}}))((function(e){var t=e.cell,n=e.isFlagged,r=e.isVisible,c=e.isExploded,l=e.flagCell,s=e.clickCell;if(c)return a.a.createElement("div",{"data-test-detonated":!0,className:"cell detonate"},a.a.createElement(i.a,{icon:o.b}));if(n)return a.a.createElement("div",{"data-test-flagged":!0,className:"cell raised flag",onContextMenu:function(e){l(e,t)}},a.a.createElement(i.a,{icon:o.c}));if(r){if(t.isMine)return a.a.createElement("div",{"data-test-visible-mine":!0,className:"cell bomb"},a.a.createElement(i.a,{icon:o.a}));if(0!==t.number){var f=u[t.number];return a.a.createElement("div",{"data-test-visible":!0,className:"cell "+f},t.number)}return a.a.createElement("div",{"data-test-empty":!0,className:"cell empty"})}return a.a.createElement("div",{"data-test-hidden":!0,className:"cell raised",onContextMenu:function(e){l(e,t)},onClick:function(e){s(e,t)}})}));function d(e){var t=e.row.map((function(e,t){return a.a.createElement(f,{"data-column":t,key:e.id,cell:e})}));return a.a.createElement("div",{"data-row":e.y,key:e.y,className:"row"},t)}var m=n(21),g=function(e){var t=e.gameRunning,n=e.gameOver,c=e.gameWon,l=Object(r.useState)(1),i=Object(m.a)(l,2),o=i[0],u=i[1];Object(r.useEffect)((function(){var e=null;return t&&(e=setInterval((function(){u((function(e){return e+1}))}),1e3)),function(){return clearInterval(e)}}));var s=c?"timer won":"timer";return t||n?a.a.createElement("div",{className:s},o):a.a.createElement("div",{className:"timer-blank"})};function b(e){var t=e.selectedCells,n=e.flaggedCells,r=e.board;return a.a.createElement("div",{className:"progress"},a.a.createElement("dl",null,a.a.createElement("dt",null,"Cells"),a.a.createElement("dd",null,t.length," / ",r.totalCells)),a.a.createElement("dl",null,a.a.createElement("dt",null,"Flags"),a.a.createElement("dd",null,n.length," / ",r.totalMines)))}var p=Object(l.b)((function(e){return{board:e.board,gameRunning:e.gameRunning,gameOver:e.gameOver,gameWon:e.gameWon,selectedCells:e.selectedCells,flaggedCells:e.flaggedCells}}),null)((function(e){var t,n=e.board,r=e.gameRunning,c=e.gameOver,l=e.gameWon,i=e.selectedCells,o=e.flaggedCells,u=n.rows.map((function(e,t){return a.a.createElement(d,{row:e,"data-y":t,key:t})}));return c&&l?t="Congratulations, you win!":c&&(t="Sorry, please try again :("),a.a.createElement("div",{className:"game"},a.a.createElement(b,{selectedCells:i,flaggedCells:o,board:n}),a.a.createElement(g,{gameRunning:r,gameOver:c,gameWon:l}),a.a.createElement("div",{className:"board"},u),a.a.createElement("p",null,t))})),O=n(19),y={easy:190,medium:90,hard:20,insane:5};var v=Object(l.b)((function(e){return{board:e.board,clickedMine:e.clickedMine}}),(function(e){return{chainReaction:function(t){return e(function(e){return{type:"CHAIN_REACTION",cell:e}}(t))}}}))((function(e){var t=e.board,n=e.clickedMine,a=e.chainReaction,c=t.mines,l=t.difficulty,i=Object(r.useState)([]),o=Object(m.a)(i,2),u=o[0],s=o[1];return Object(r.useEffect)((function(){n&&s(function(e,t){return e.map((function(e){return{distance:Math.hypot(e.x-t.x,e.y-t.y),cell:e}})).sort((function(e,t){return e.distance-t.distance}))}(c,n))}),[n]),Object(r.useEffect)((function(){if(n&&0!==u.length){var e=Object(O.a)(u),t=e[0],r=e.slice(1);if(a(t.cell),r.length>0){var c,i=Math.random()*y[l];return c=setInterval((function(){s(r)}),i),function(){return clearInterval(c)}}}}),[u,n]),null})),h=n(12);var j={easy:{width:10,height:10,density:10},medium:{width:30,height:25,density:120},hard:{width:50,height:30,density:220},insane:{width:60,height:30,density:350}},E=Object.keys(j),C=Object(l.b)((function(e,t){return{difficulty:e.difficulty,resetGame:e.resetGame,history:t.history}}),(function(e){return{resetGame:function(){return e({type:"RESET_GAME"})},setDifficultyFromUrl:function(t){if(E.includes(t))return e(s(t)),!0}}}))((function(e){var t=e.resetGame,n=e.difficulty,r=e.history,c=e.setDifficultyFromUrl,l=function(){return r.push("/")},i=Object(h.f)().difficulty;return n?a.a.createElement("section",null,a.a.createElement("button",{onClick:l},"Change Difficulty"),a.a.createElement("button",{onClick:t},"Start Over"),a.a.createElement(p,null),a.a.createElement(v,null)):(c(i)||l(),null)})),w=n(35),P=Object.keys(j).map((function(e){return{value:e,label:(t=e,"".concat(t[0].toUpperCase()).concat(t.slice(1)))};var t}));var D=Object(l.b)(null,(function(e,t){var n=t.history;return{setDifficulty:function(t){var r=t.value;e(s(r)),E.includes(r)&&n.push("/".concat(r))}}}))((function(e){e.difficulty;var t=e.setDifficulty;return a.a.createElement("div",{className:"difficulty"},a.a.createElement("div",{className:"difficulty__selector",style:{textAlign:"left"}},a.a.createElement("h3",null,"Select Difficulty"),a.a.createElement(w.a,{options:P,onChange:t})))})),k=n(26);var M=function(){return a.a.createElement("main",{className:"app"},a.a.createElement(k.a,null,a.a.createElement(h.c,null,a.a.createElement(h.a,{path:"/:difficulty",component:C}),a.a.createElement(h.a,{path:"/",component:D}))))},N=n(16);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(4),S=n(11),x=n(36);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e,t){var n=e.height,r=e.width,a=e.rows,c=t.x,l=t.y,i=l+1>n-1?n-1:l+1,o=c-1<0?0:c-1,u=c+1>r-1?r-1:c+1,s=function e(t,n,r){return n>u?r:e(t,n+1,n===c&&t===l?r:[].concat(Object(I.a)(r),[a[t][n]]))};return function e(t,n){return t>i?n:e(t+1,[].concat(Object(I.a)(n),[s(t,o,[])]))}(l-1<0?0:l-1,[]).flat()}function _(e){var t=e.length,n=e[0].length,r=function(r){return r.isMine?"!":L({height:t,width:n,rows:e},r).filter((function(e){return e.isMine})).length};return e.map((function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{number:r(e)})}))}))}function F(e,t,n,r,a){return{id:a*t+r,isMine:arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e,t){var n=e/t;return 1===Math.floor(Math.random()*n)}(e,n),x:r,y:a}}function W(e,t,n,r){var a=function(e,t,n){for(var r=[],a=t*e,c=0;c<e;c++){for(var l=[],i=0;i<t;i++)l.push(F(a,t,n,i,c));r.push(l)}return _(r)}(e,t,n),c=a.flat().filter((function(e){return e.isMine}));return{height:e,width:t,density:n,difficulty:r,rows:a,mines:c,totalCells:e*t,totalMines:c.length}}function A(e,t,n){var r=Object(O.a)(t),a=r[0],c=r.slice(1);if(0===a.number){var l=L(e,a).filter((function(e){return!e.isMine&&e.number>=0&&-1===n.indexOf(e)})),i=[].concat(Object(I.a)(n),Object(I.a)(l));return G(e,[].concat(Object(I.a)(c),Object(I.a)(l.filter((function(e){return 0===e.number})))),i)}return G(e,c,n)}function G(e,t,n){return t.length>0?A(e,t,n):n}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t){var n=t.board,r=t.selectedCells;if(e.isMine)return U({},t,{gameRunning:!1,gameOver:!0,gameWon:!1,clickedMine:e});if(!r.includes(e)){var a=function(e,t,n){return A(e,[n],[].concat(Object(I.a)(t),[n]))}(n,r,e);return a.length+n.totalMines===n.totalCells?U({},t,{selectedCells:a,gameRunning:!1,gameOver:!0,gameWon:!0}):U({},t,{gameRunning:!0,selectedCells:a})}}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(S.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=["SET_DIFFICULTY","RESET_GAME"];function $(e,t){var n=t.type,r=Object(x.a)(t,["type"]),a=e.selectedCells;if(Y.includes(n)){var c=r.difficulty||e.difficulty,l=j[c];return c&&l?V({},e,{gameRunning:!1,gameOver:!1,gameWon:!1,selectedCells:[],flaggedCells:[],exploded:[],clickedMine:null,difficulty:c,board:c?W(l.height,l.width,l.density,c):null}):e}return"CHAIN_REACTION"===n?V({},e,{exploded:[].concat(Object(I.a)(e.exploded),[r.cell])}):"CLICK_CELL"===n?K(r.cell,e):"CLICK_FLAG"!==n||a.includes(r.cell)?e:function(e,t){var n=t.flaggedCells;return n.includes(e)?H({},t,{flaggedCells:n.filter((function(t){return t.id!==e.id}))}):H({},t,{flaggedCells:[].concat(Object(I.a)(n),[e])})}(r.cell,e)}var q=Object(N.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=$(e,t);return n}));Object(c.render)(a.a.createElement(l.a,{store:q},a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.d864d242.chunk.js.map