(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{21:function(e,t,n){e.exports=n(33)},26:function(e,t,n){},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(5),r=n.n(l),c=(n(26),n(9)),s=(n(27),n(2)),o=n(3),u=n(4),h=n(20),d=n(16),f=n(6),m=n(19),g=n(10),v=n(11),b={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"either"};function p(e){var t=e.cell,n=e.selectedCells.indexOf(t)>-1,a=e.flaggedCells.indexOf(t)>-1,l=e.exploded.indexOf(t)>-1;if(a)return i.a.createElement("div",{className:"cell raised flag"},i.a.createElement(g.a,{icon:v.c,onContextMenu:function(n){e.flagCell(n,t)}}));if(n){if(l)return i.a.createElement("div",{className:"cell detonate"},i.a.createElement(g.a,{icon:v.b}));if(t.isMine)return i.a.createElement("div",{className:"cell bomb"},i.a.createElement(g.a,{icon:v.a}));if(0!==t.number){var r=b[t.number];return i.a.createElement("div",{className:"cell "+r},t.number)}return i.a.createElement("div",{className:"cell empty"})}return i.a.createElement("div",{className:"cell raised",onContextMenu:function(n){e.flagCell(n,t)},onClick:function(n){e.clickCell(n,t)}})}function y(e){var t=e.row.map((function(t,n){return i.a.createElement(p,Object.assign({"data-column":n,key:t.id,cell:t},e))}));return i.a.createElement("div",{"data-row":e.y,key:e.y,className:"row"},t)}var O=function(e){var t=Object(a.useState)(1),n=Object(c.a)(t,2),l=n[0],r=n[1];return Object(a.useEffect)((function(){var t=null;return e.gameRunning?t=setInterval((function(){r((function(e){return e+1}))}),1e3):e.gameOver&&clearInterval(t),function(){return clearInterval(t)}}),[l,e.gameRunning,e.gameOver]),e.gameRunning||e.gameOver?i.a.createElement("div",{className:"timer"},l):i.a.createElement("div",{className:"timer-blank"})};function C(e){return i.a.createElement("div",{className:"progress"},i.a.createElement("dl",null,i.a.createElement("dt",null,"Cells"),i.a.createElement("dd",null,e.selectedCells.length," / ",e.board.totalCells)),i.a.createElement("dl",null,i.a.createElement("dt",null,"Flags"),i.a.createElement("dd",null,e.flaggedCells.length," / ",e.board.totalMines)))}function k(e){var t=e.board.rows.map((function(t,n){return i.a.createElement(y,Object.assign({row:t,"data-y":n,key:n},e))}));return i.a.createElement("div",{className:"game"},i.a.createElement(C,e),i.a.createElement(O,{gameRunning:e.gameRunning,gameOver:e.gameOver}),i.a.createElement("div",{className:"board"},t))}var j,w,E=n(7),x=n(8),M=n.n(x),N=(j=function(){function e(t,n,a,i,l){Object(o.a)(this,e),this.board=t,this.id=n,this.isMine=a,this.x=i,this.y=l}return Object(u.a)(e,[{key:"number",get:function(){return this.board.fetchSiblings(this).filter((function(e){return e.isMine})).length}}]),e}(),Object(E.a)(j.prototype,"number",[M.a],Object.getOwnPropertyDescriptor(j.prototype,"number"),j.prototype),j);function S(e,t,n){var a=function(e,t){var n=e/t;return 1===Math.floor(Math.random()*n)}(e.totalCells,e.density),i=n*e.width+t;return new N(e,i,a,t,n)}var _=(w=function(){function e(t,n,a){Object(o.a)(this,e),this.height=t,this.width=n,this.density=a,this.rows=function(e){for(var t=[],n=0;n<e.height;n++){for(var a=[],i=0;i<e.width;i++)a.push(S(e,i,n));t.push(a)}return t}(this)}return Object(u.a)(e,[{key:"fetchChainedCells",value:function(e,t){var n=e[0],a=e.slice(1,e.length);if(0===n.number){var i=this.fetchSiblings(n).filter((function(e){return!e.isMine&&e.number>=0&&-1===t.indexOf(e)})),l=[].concat(Object(s.a)(t),Object(s.a)(i)),r=[].concat(Object(s.a)(a),Object(s.a)(i.filter((function(e){return 0===e.number}))));return this._doneFetchChainedCells(r,l)}return this._doneFetchChainedCells(a,t)}},{key:"_doneFetchChainedCells",value:function(e,t){return e.length>0?this.fetchChainedCells(e,t):t}},{key:"fetchSiblings",value:function(e){for(var t,n,a,i,l=[],r=e.y-1;r<=e.y+1;r++)for(var c=e.x-1;c<=e.x+1;c++)t=r,n=c,a=this.height,i=this.width,n<0||t<0||n>i-1||t>a-1||r===e.y&&c===e.x||l.push(this.rows[r][c]);return l}},{key:"totalCells",get:function(){return this.height*this.width}},{key:"totalMines",get:function(){return this.mines.length}},{key:"mines",get:function(){return this.rows.flat().filter((function(e){return e.isMine}))}}]),e}(),Object(E.a)(w.prototype,"totalCells",[M.a],Object.getOwnPropertyDescriptor(w.prototype,"totalCells"),w.prototype),Object(E.a)(w.prototype,"totalMines",[M.a],Object.getOwnPropertyDescriptor(w.prototype,"totalMines"),w.prototype),Object(E.a)(w.prototype,"mines",[M.a],Object.getOwnPropertyDescriptor(w.prototype,"mines"),w.prototype),w);var D=function(){function e(t){Object(o.a)(this,e),this.mines=t}return Object(u.a)(e,[{key:"start",value:function(e){this.running=!0,this.callback=e,this._explode(this.mines)}},{key:"_explode",value:function(e){var t=this,n=Math.floor(Math.random()*e.length),a=200*Math.random(),i=e[n],l=function(e,t){var n=[],a=[];0!==t&&(n=e.slice(0,t));t!==e.length-1&&(a=e.slice(t+1,e.length));return[].concat(Object(s.a)(n),Object(s.a)(a))}(e,n);this.callback&&this.callback(i),l.length>0&&this.running&&setTimeout((function(){t._explode(l)}),a)}},{key:"stop",value:function(){this.running=!1,this.callback=null}}]),e}();var R=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).reset=n.reset.bind(Object(f.a)(n)),n.clickCell=n.clickCell.bind(Object(f.a)(n)),n.flagCell=n.flagCell.bind(Object(f.a)(n)),n.state=n._initGame(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"_initGame",value:function(){var e=this.props;return{board:new _(e.height,e.width,e.density),selectedCells:[],flaggedCells:[],exploded:[],gameRunning:!1,gameOver:!1}}},{key:"clickCell",value:function(e,t){e.preventDefault(),this.state.gameOver||(this.state.gameRunning||this.setState({gameRunning:!0}),t.isMine?this.detonate(t):-1===this.state.selectedCells.indexOf(t)&&this.clearCells(t))}},{key:"flagCell",value:function(e,t){e.preventDefault(),this.state.selectedCells.indexOf(t)>-1||(this.state.flaggedCells.indexOf(t)>-1?this.setState({flaggedCells:this.state.flaggedCells.filter((function(e){return e.id!==t.id}))}):this.setState({flaggedCells:[].concat(Object(s.a)(this.state.flaggedCells),[t])}))}},{key:"detonate",value:function(e){var t=this;this.revealBoard(),this.setState({exploded:[e]});var n=this.state.board;this.detonator=new D(n.mines),this.detonator.start((function(e){t.setState({exploded:[].concat(Object(s.a)(t.state.exploded),[e])})}))}},{key:"componentWillUnmount",value:function(){this.detonator.stop()}},{key:"clearCells",value:function(e){var t=this.state.board,n=[].concat(Object(s.a)(this.state.selectedCells),[e]),a=t.fetchChainedCells([e],n);this.setState({selectedCells:a}),a.length+t.totalMines===t.totalCells&&this.revealBoard()}},{key:"revealBoard",value:function(){var e=this.state.board;this.setState({gameOver:!0,gameRunning:!1,selectedCells:e.rows.flat()})}},{key:"reset",value:function(){this.setState(this._initGame())}},{key:"render",value:function(){return i.a.createElement("section",null,i.a.createElement("button",{onClick:this.reset},"Start Over"),i.a.createElement(k,Object.assign({board:this.state.board,flagCell:this.flagCell,clickCell:this.clickCell},this.state)))}}]),t}(i.a.Component),B=n(18),F={easy:{width:10,height:10,density:10},medium:{width:30,height:25,density:120},hard:{width:50,height:30,density:220},insane:{width:60,height:30,density:350}},I=Object.keys(F).map((function(e){return{value:e,label:(t=e,"".concat(t[0].toUpperCase()).concat(t.slice(1)))};var t}));function P(e){return i.a.createElement("div",{className:"difficulty"},i.a.createElement("div",{className:"difficulty__selector"},i.a.createElement("h3",null,"Select Difficulty"),i.a.createElement(B.a,{options:I,value:e.difficulty,onChange:function(t){return e.setDifficulty(t.value)}})))}window.oncontextmenu=function(){return!1};var G=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],l=t[1];return n?i.a.createElement("main",{className:"app"},i.a.createElement("button",{onClick:function(){return l()}},"Change Difficulty"),i.a.createElement(R,F[n])):i.a.createElement(P,{setDifficulty:l,difficulty:n})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.e1e93a4d.chunk.js.map