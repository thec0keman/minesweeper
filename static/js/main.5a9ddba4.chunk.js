(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{31:function(e,t,n){e.exports=n(45)},36:function(e,t,n){},37:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(5),i=(n(36),n(37),n(4)),c=n(8),o=n(9),u=n(28),s=n(24),f=n(30);function d(e){return{type:"CLICK_CELL",cell:e}}function m(e){return{type:"CLICK_FLAG",cell:e}}function h(){return{type:"RESET_GAME",clearDifficutly:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}var g=n(26),p={easy:{width:10,height:10,density:10},medium:{width:30,height:25,density:120},hard:{width:50,height:30,density:220},insane:{width:60,height:30,density:350}},b=Object.keys(p).map((function(e){return{value:e,label:(t=e,"".concat(t[0].toUpperCase()).concat(t.slice(1)))};var t}));var y=Object(i.b)(null,(function(e){return{setDifficulty:function(t){var n=t.value;return e({type:"SET_DIFFICULTY",difficulty:n})}}}))((function(e){e.difficulty;var t=e.setDifficulty;return a.a.createElement("div",{className:"difficulty"},a.a.createElement("div",{className:"difficulty__selector",style:{textAlign:"left"}},a.a.createElement("h3",null,"Select Difficulty"),a.a.createElement(g.a,{options:b,onChange:t})))})),v=n(15),O=n(16),C={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"either"};var j=Object(i.b)((function(e,t){var n=e.selectedCells,r=e.flaggedCells,a=e.exploded,l=e.gameOver,i=t.cell;return{isVisible:l||n.includes(i),isFlagged:r.includes(i),isExploded:a.includes(i)}}),(function(e,t){return{flagCell:function(t,n){return t.preventDefault(),e(m(n))},clickCell:function(t,n){return t.preventDefault(),e(d(n))}}}))((function(e){var t=e.cell,n=e.isFlagged,r=e.isVisible,l=e.isExploded,i=e.flagCell,c=e.clickCell;if(n)return a.a.createElement("div",{className:"cell raised flag"},a.a.createElement(v.a,{icon:O.c,onContextMenu:function(e){i(e,t)}}));if(r){if(l)return a.a.createElement("div",{className:"cell detonate"},a.a.createElement(v.a,{icon:O.b}));if(t.isMine)return a.a.createElement("div",{className:"cell bomb"},a.a.createElement(v.a,{icon:O.a}));if(0!==t.number){var o=C[t.number];return a.a.createElement("div",{className:"cell "+o},t.number)}return a.a.createElement("div",{className:"cell empty"})}return a.a.createElement("div",{className:"cell raised",onContextMenu:function(e){i(e,t)},onClick:function(e){c(e,t)}})}));function E(e){var t=e.row.map((function(e,t){return a.a.createElement(j,{"data-column":t,key:e.id,cell:e})}));return a.a.createElement("div",{"data-row":e.y,key:e.y,className:"row"},t)}var w=n(27),k=function(e){var t=e.gameRunning,n=e.gameOver,l=e.gameWon,i=Object(r.useState)(1),c=Object(w.a)(i,2),o=c[0],u=c[1];Object(r.useEffect)((function(){var e=null;return t?e=setInterval((function(){u((function(e){return e+1}))}),1e3):n&&clearInterval(e),function(){return clearInterval(e)}}),[o,t,n]);var s=l?"timer won":"timer";return t||n?a.a.createElement("div",{className:s},o):a.a.createElement("div",{className:"timer-blank"})};function D(e){var t,n=e.selectedCells,r=e.flaggedCells,l=e.board,i=e.gameWon,c=e.gameOver;return c&&i?t=a.a.createElement("div",null,"Congratulations, you win!"):c&&(t=a.a.createElement("div",null,"Sorry, please try again :(")),a.a.createElement("div",{className:"progress"},a.a.createElement("dl",null,a.a.createElement("dt",null,"Cells"),a.a.createElement("dd",null,n.length," / ",l.totalCells)),a.a.createElement("dl",null,a.a.createElement("dt",null,"Flags"),a.a.createElement("dd",null,r.length," / ",l.totalMines)),t)}var P=Object(i.b)((function(e){return{board:e.board,gameRunning:e.gameRunning,gameOver:e.gameOver,gameWon:e.gameWon,selectedCells:e.selectedCells,flaggedCells:e.flaggedCells}}),(function(e,t){return{clickCell:function(e,t){return e.preventDefault(),d(t)},flagCell:function(e,t){return e.preventDefault(),m(t)}}}))((function(e){var t=e.board,n=e.gameRunning,r=e.gameOver,l=e.gameWon,i=e.selectedCells,c=e.flaggedCells,o=t.rows.map((function(e,t){return a.a.createElement(E,{row:e,"data-y":t,key:t})}));return a.a.createElement("div",{className:"game"},a.a.createElement(D,{selectedCells:i,flaggedCells:c,gameWon:l,gameOver:r,board:t}),a.a.createElement(k,{gameRunning:n,gameOver:r,gameWon:l}),a.a.createElement("div",{className:"board"},o))})),x=n(3),M=function(){function e(t){Object(c.a)(this,e),this.mines=t}return Object(o.a)(e,[{key:"start",value:function(e){this.running=!0,this.callback=e,this._explode(this.mines)}},{key:"_explode",value:function(e){var t=this,n=Math.floor(Math.random()*e.length),r=200*Math.random(),a=e[n],l=function(e,t){var n=[],r=[];0!==t&&(n=e.slice(0,t));t!==e.length-1&&(r=e.slice(t+1,e.length));return[].concat(Object(x.a)(n),Object(x.a)(r))}(e,n);this.callback&&this.callback(a),l.length>0&&this.running&&setTimeout((function(){t._explode(l)}),r)}},{key:"stop",value:function(){this.running=!1,this.callback=null}}]),e}();var N=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(o.a)(t,[{key:"detonate",value:function(e){var t=this,n=this.props.board;this.detonator=new M(n.mines),this.detonator.start((function(e){t.props.chainReaction(e)}))}},{key:"componentWillUnmount",value:function(){this.detonator.stop()}},{key:"render",value:function(){var e=this.props,t=e.difficulty,n=e.clearDifficulty,r=e.resetGame,l=e.detonate;return l&&this.detonate(l),t?a.a.createElement("section",null,a.a.createElement("button",{onClick:n},"Change Difficulty"),a.a.createElement("button",{onClick:r},"Start Over"),a.a.createElement(P,null)):a.a.createElement(y,null)}}]),t}(a.a.Component),_=Object(i.b)((function(e){return{difficulty:e.difficulty,resetGame:e.resetGame,board:e.board,detonate:e.detonate}}),(function(e){return{resetGame:function(){return e(h())},clearDifficulty:function(){return e(h(!0))},chainReaction:function(t){return e(function(e){return{type:"CHAIN_REACTION",cell:e}}(t))}}}))(N);window.oncontextmenu=function(){return!1};var S=function(){return a.a.createElement("main",{className:"app"},a.a.createElement(_,null))},I=n(14);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R,W,F=n(10),L=n(29),A=n(11),T=n(12),G=n.n(T),K=(R=function(){function e(t,n,r,a,l){Object(c.a)(this,e),this.board=t,this.id=n,this.isMine=r,this.x=a,this.y=l}return Object(o.a)(e,[{key:"number",get:function(){return this.board.fetchSiblings(this).filter((function(e){return e.isMine})).length}}]),e}(),Object(A.a)(R.prototype,"number",[G.a],Object.getOwnPropertyDescriptor(R.prototype,"number"),R.prototype),R);function U(e,t,n){var r=function(e,t){var n=e/t;return 1===Math.floor(Math.random()*n)}(e.totalCells,e.density),a=n*e.width+t;return new K(e,a,r,t,n)}var B=(W=function(){function e(t,n,r){Object(c.a)(this,e),this.height=t,this.width=n,this.density=r,this.rows=function(e){for(var t=[],n=0;n<e.height;n++){for(var r=[],a=0;a<e.width;a++)r.push(U(e,a,n));t.push(r)}return t}(this)}return Object(o.a)(e,[{key:"fetchChainedCells",value:function(e,t){var n=e[0],r=e.slice(1,e.length);if(0===n.number){var a=this.fetchSiblings(n).filter((function(e){return!e.isMine&&e.number>=0&&-1===t.indexOf(e)})),l=[].concat(Object(x.a)(t),Object(x.a)(a)),i=[].concat(Object(x.a)(r),Object(x.a)(a.filter((function(e){return 0===e.number}))));return this._doneFetchChainedCells(i,l)}return this._doneFetchChainedCells(r,t)}},{key:"_doneFetchChainedCells",value:function(e,t){return e.length>0?this.fetchChainedCells(e,t):t}},{key:"fetchSiblings",value:function(e){for(var t,n,r,a,l=[],i=e.y-1;i<=e.y+1;i++)for(var c=e.x-1;c<=e.x+1;c++)t=i,n=c,r=this.height,a=this.width,n<0||t<0||n>a-1||t>r-1||i===e.y&&c===e.x||l.push(this.rows[i][c]);return l}},{key:"totalCells",get:function(){return this.height*this.width}},{key:"totalMines",get:function(){return this.mines.length}},{key:"mines",get:function(){return this.rows.flat().filter((function(e){return e.isMine}))}}]),e}(),Object(A.a)(W.prototype,"totalCells",[G.a],Object.getOwnPropertyDescriptor(W.prototype,"totalCells"),W.prototype),Object(A.a)(W.prototype,"totalMines",[G.a],Object.getOwnPropertyDescriptor(W.prototype,"totalMines"),W.prototype),Object(A.a)(W.prototype,"mines",[G.a],Object.getOwnPropertyDescriptor(W.prototype,"mines"),W.prototype),W);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(F.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t){var n=t.board,r=t.selectedCells;if(e.isMine)return J({},t,{gameRunning:!1,gameOver:!0,gameWon:!1,detonate:e});if(!r.includes(e)){var a=function(e,t,n){var r=[].concat(Object(x.a)(t),[n]);return e.fetchChainedCells([n],r)}(n,r,e);return a.length+n.totalMines===n.totalCells?J({},t,{selectedCells:a,gameRunning:!1,gameOver:!0,gameWon:!0}):J({},t,{gameRunning:!0,selectedCells:a})}}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(F.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(F.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=["SET_DIFFICULTY","RESET_GAME"];function X(e,t){var n=t.type,r=Object(L.a)(t,["type"]),a=e.selectedCells;if(Q.includes(n)){var l=!0===r.clearDifficutly?null:r.difficulty||e.difficulty,i=p[l];return z({},e,{gameRunning:!1,gameOver:!1,gameWon:!1,selectedCells:[],flaggedCells:[],exploded:[],difficulty:l,board:l?new B(i.height,i.width,i.density):null})}return"CHAIN_REACTION"===n?z({},e,{detonate:!1,exploded:[].concat(Object(x.a)(e.exploded),[r.cell])}):"CLICK_CELL"===n?V(r.cell,e):"CLICK_FLAG"!==n||a.includes(r.cell)?e:function(e,t){var n=t.flaggedCells;return n.includes(e)?$({},t,{flaggedCells:n.filter((function(t){return t.id!==e.id}))}):$({},t,{flaggedCells:[].concat(Object(x.a)(n),[e])})}(r.cell,e)}var Z=Object(I.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=X(e,t);return n}));Object(l.render)(a.a.createElement(i.a,{store:Z},a.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.5a9ddba4.chunk.js.map